/* client/css/style.css */
/* This file defines the visual appearance of the HeliX chat client interface. */

/* --- Color Palette (Dark Theme - Refined) --- */
/* Defines CSS custom properties (variables) for a consistent dark theme. */
:root {
    /* Background Colors */
    --bg-body: #1e1e1e;                 /* Main body background */
    --bg-sidebar: #252526;              /* Sidebar background */
    --bg-main: #1e1e1e;                 /* Main content area background (same as body) */
    --bg-input: #3c3c3c;                /* Input field background */
    --bg-message-area: #252526;         /* Background for the message display area */
    --bg-message-peer-subtle: rgba(204, 204, 204, 0.05); /* Subtle background for peer messages (optional) */
    --bg-message-own-subtle: rgba(0, 122, 204, 0.08);   /* Subtle background for own messages (optional) */
    --bg-message-system: rgba(218, 165, 32, 0.1); /* Background for system messages */
    --bg-message-file: rgba(100, 100, 120, 0.1); /* NEW: Background for file transfer messages */
    --bg-button: #3f3f46;               /* Default button background */
    --bg-button-hover: #5a5a63;         /* Button background on hover */
    --bg-button-active: #4a4a53;        /* Button background when clicked */
    --bg-button-disabled: #444444;      /* Button background when disabled */
    --bg-button-danger: #8f3040;        /* Background for danger/destructive buttons (e.g., disconnect, reject, cancel, SAS deny/cancel) */
    --bg-button-danger-hover: #a84050;  /* Danger button background on hover */
    --bg-button-success: #3f6844;       /* Background for success buttons (e.g., accept, SAS confirm) */
    --bg-button-success-hover: #4f8054; /* Success button background on hover */
    --bg-list-hover: #2a2d2e;           /* Background for session list items on hover */
    --bg-list-active: #094771;          /* Background for the active session list item */
    --bg-info: #333322;                 /* Background for informational areas (e.g., incoming request, SAS pane) */
    --bg-danger-info: #442a31;          /* Background for error/denial info areas */
    --bg-settings: #2d2d30;             /* Background for the settings pane */
    --bg-overlay: rgba(0, 0, 0, 0.6);   /* Background for the overlay */
    --bg-emoji-panel: #2d2d30;          /* NEW: Background for emoji picker */
    --bg-emoji-hover: #3f3f46;          /* NEW: Background for emoji on hover */
    --bg-sas-display: #1a1a1a;          /* NEW: Background for the SAS code display */

    /* Text Colors */
    --text-light: #cccccc;              /* Primary light text color */
    --text-light-strong: #d4d4d4;       /* Slightly stronger light text color */
    --text-secondary: #a0a0a0;          /* Secondary text color (for labels, timestamps, status) */
    --text-link: #4dabf7;               /* Link color (used for download link, message links) */
    --text-sender-peer: #ce9178;        /* Color for peer's sender name */
    --text-sender-own: #9cdcfe;         /* Color for own sender name */
    --text-sender-system: #dcdcaa;      /* Color for system message sender/prefix */
    --text-action: #ffd54f;             /* NEW: Color for /me action messages (using info color) */
    --text-error: #f48771;              /* Text color for error messages */
    --text-info: #ffd54f;               /* Text color for informational messages */
    --text-button-disabled: #888888;    /* Text color for disabled buttons */
    --text-typing: #a0a0a0;             /* Color for the 'is typing...' indicator text */
    --text-file-info: #b0b0b0;          /* NEW: Color for file info text */
    --text-sas-display: #e0e0e0;        /* NEW: Text color for the SAS code */

    /* Border Colors */
    --border-color: #333333;            /* Default border color */
    --border-color-input: #555555;      /* Border color for input fields */
    --border-color-danger: #a84050;     /* Border color for danger elements */
    --border-color-success: #4f8054;    /* Border color for success elements */
    --border-color-info: #666;          /* Border color for info elements */
    --border-color-settings: #444;      /* Border color for settings pane */
    --border-color-file: #4a4a55;       /* NEW: Border color for file transfer messages */
    --border-color-emoji-panel: #444;   /* NEW: Border color for emoji picker */
    --border-color-sas-display: #444;   /* NEW: Border color for SAS display */

    /* Accent Colors */
    --accent-red: #f44336;              /* Red accent (e.g., notification dot) */
    --accent-blue: #007acc;             /* Blue accent (e.g., input focus, version text) */
    --accent-green: #4ec9b0;            /* Green accent (e.g., own ID highlight) */
    --accent-progress: #0e639c;         /* NEW: Color for progress bar */
}

/* Basic Reset & Body */
/* Apply border-box sizing globally for easier layout calculations. */
html {
    height: 100%; /* Ensure HTML element takes full viewport height */
    box-sizing: border-box;
}
*, *:before, *:after {
  box-sizing: inherit; /* Inherit box-sizing from html */
}

/* Base styles for the entire page. */
body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; /* System font stack */
    margin: 0; /* Remove default body margin */
    display: flex; /* Use flexbox for main layout */
    flex-direction: column; /* Stack children vertically (app content, status bar) */
    height: 100vh; /* Full viewport height */
    position: relative; /* Needed for absolute positioning of the status bar */
    padding-bottom: 28px; /* Space at the bottom for the status bar */
    background-color: var(--bg-body); /* Apply body background color */
    color: var(--text-light); /* Apply default text color */
    font-size: 15px; /* Base font size */
    line-height: 1.5; /* Base line height */
}

/* Status Bar (Footer Style) */
/* Styles the status bar fixed at the bottom of the screen. */
.status-bar {
    padding: 4px 12px; /* Inner spacing */
    background-color: var(--bg-sidebar); /* Background color */
    border-top: 1px solid var(--border-color); /* Top border */
    flex-shrink: 0; /* Prevent shrinking when content grows */
    font-size: 0.85em; /* Smaller font size */
    color: var(--text-secondary); /* Secondary text color */
    line-height: 1.4; /* Adjust line height */
    position: absolute; /* Position relative to the body */
    bottom: 0; /* Stick to the bottom */
    left: 0; /* Stretch across the width */
    right: 0; /* Stretch across the width */
    height: 28px; /* Fixed height */
    z-index: 10; /* Ensure it's above other content if overlap occurs */
}

/* Registration Area */
/* Styles the initial view where the user enters their identifier. */
#registration-area {
    padding: 20px; /* Inner spacing */
    text-align: center; /* Center-align text */
    display: block; /* Initially shown (JS hides it later) */
    height: calc(100% - 28px); /* Fill height minus status bar */
    display: flex; /* Use flexbox for centering */
    flex-direction: column; /* Stack label, input, button vertically */
    justify-content: center; /* Center vertically */
    align-items: center; /* Center horizontally */
}
/* Style for the label in the registration area. */
#registration-area label {
    margin-right: 5px; /* Space to the right (if needed) */
    color: var(--text-secondary); /* Secondary text color */
    margin-bottom: 10px; /* Space below the label */
    display: block; /* Ensure it takes its own line */
}
/* Style for the input field in the registration area. */
#registration-area input {
    margin-right: 5px; /* Space to the right */
    margin-bottom: 15px; /* Space below the input */
    min-width: 220px; /* Minimum width */
    text-align: center; /* Center the placeholder/text */
}


/* Main App Layout */
/* Container for the sidebar and main content area, hidden initially. */
#app-container {
    display: none; /* Hidden by default, JS changes to 'flex' after registration */
    height: 100%; /* Fill the available height */
    /* display: flex; */ /* This will be set by JS */
    overflow: hidden; /* Prevent content overflow from breaking layout */
}

/* Sidebar */
/* Styles the left sidebar containing user info, chat initiation, and session list. */
#sidebar {
    width: 240px; /* Fixed width */
    flex-shrink: 0; /* Prevent shrinking */
    border-right: 1px solid var(--border-color); /* Border separating from main content */
    padding: 15px; /* Inner spacing */
    display: flex; /* Use flexbox for vertical layout */
    flex-direction: column; /* Stack children vertically */
    background-color: var(--bg-sidebar); /* Sidebar background color */
    overflow-y: auto; /* Allow vertical scrolling if content exceeds height */
}

/* Displays the user's registered identifier in the sidebar. */
#my-identifier-display {
    margin-bottom: 20px; /* Space below */
    font-weight: normal; /* Normal font weight for the label */
    word-wrap: break-word; /* Wrap long IDs */
    color: var(--text-secondary); /* Secondary text color for the label */
    border-bottom: 1px solid var(--border-color); /* Separator line */
    padding-bottom: 10px; /* Space below the text, above the line */
    font-size: 0.9em; /* Slightly smaller font */
    text-align: center; /* Center align the content */
}
/* Styles the actual identifier text within the display area. */
#my-identifier-display strong {
    color: var(--accent-green); /* Use accent color for the ID */
    font-weight: bold; /* Make the ID bold */
    display: block; /* Put ID on its own line */
    margin-top: 4px; /* Space above the ID */
    font-size: 1.1em; /* Slightly larger font for the ID */
    /* Inherits text-align: center from parent */
}

/* Area in the sidebar for initiating a new chat. */
#initiation-area {
    margin-bottom: 15px; /* Reduced space below this section */
}
/* Styles labels within the initiation area. */
#initiation-area label {
    display: block; /* Label on its own line */
    margin-bottom: 5px; /* Space below label */
    font-size: 0.9em; /* Smaller font size */
    color: var(--text-secondary); /* Secondary text color */
    text-align: center; /* Center align the label */
}
/* Styles input field within the initiation area. */
#initiation-area input {
    display: block; /* Input on its own line */
    margin-bottom: 8px; /* Space below input */
    width: 100%; /* Full width of the sidebar padding */
    box-sizing: border-box; /* Include padding/border in width */
}
/* Styles button within the initiation area. */
#initiation-area button {
    width: 100%; /* Full width button */
}

/* --- Sidebar Separator Line Styling --- */
#sidebar hr {
    border: 0; /* Remove default border */
    height: 1px; /* Set height for the line */
    background-color: var(--border-color); /* Use theme border color */
    margin: 15px 0; /* Add vertical spacing (adjust as needed) */
}
/* --- End Sidebar Separator Line Styling --- */


/* --- Sidebar Controls Area Styling --- */
/* Styles the container for sidebar controls like the mute button. */
#sidebar-controls {
    /* margin-bottom: 15px; REMOVED - Spacing handled by HR margin */
    padding-bottom: 10px; /* Space below the button */
    border-bottom: 1px solid var(--border-color); /* Separator line below controls */
    text-align: center; /* <<< CHANGED: Align button(s) to the center */
}

/* Styles the mute button specifically. */
#mute-button,
#settings-button { /* Apply same base style to settings button */
    background: none; /* Transparent background */
    border: 1px solid transparent; /* Transparent border initially */
    color: var(--text-secondary); /* Use secondary text color for icon */
    padding: 4px 6px; /* Small padding */
    font-size: 1.2em; /* Make icon slightly larger */
    cursor: pointer; /* Indicate interactivity */
    border-radius: 3px; /* Slightly rounded corners */
    line-height: 1; /* Prevent extra vertical space */
    transition: background-color 0.15s ease, border-color 0.15s ease, opacity 0.15s ease; /* Smooth transitions */
    margin-right: 4px; /* Add small space between buttons */
}

/* Styles the mute/settings buttons on hover. */
#mute-button:hover,
#settings-button:hover {
    background-color: var(--bg-button-hover); /* Subtle background on hover */
    border-color: var(--border-color-input); /* Show border on hover */
    color: var(--text-light); /* Slightly lighter icon color on hover */
}

/* Styles the mute/settings buttons when actively clicked. */
#mute-button:active,
#settings-button:active {
    background-color: var(--bg-button-active); /* Darker background when clicked */
}

/* Styles the mute button when it has the 'muted' class. */
#mute-button.muted {
    opacity: 0.5; /* Make it semi-transparent */
}

/* Styles the span inside the mute/settings buttons (for the icon). */
#mute-button span,
#settings-button span {
    display: inline-block; /* Allow manipulation */
    vertical-align: middle; /* Align icon vertically */
}
/* --- End Sidebar Controls Area Styling --- */


/* Container for the list of active/pending chat sessions. */
#session-list-container {
    /* margin-top: 15px; REMOVED - Space now handled by #sidebar-controls */
    /* border-top: 1px solid var(--border-color); REMOVED - Separator now below controls */
    padding-top: 10px; /* Space below the line */
    flex-grow: 1; /* Allow this container to grow and fill remaining sidebar space */
    min-height: 100px; /* Minimum height */
    overflow-y: auto; /* Allow scrolling if list is long */
}
/* Styles the "Sessions" heading. */
#session-list-container h2 {
    margin-top: 0; /* Remove default top margin */
    margin-bottom: 10px; /* Space below heading */
    font-size: 0.9em; /* Smaller font size */
    color: var(--text-secondary); /* Secondary text color */
    text-transform: uppercase; /* Uppercase text */
    letter-spacing: 1px; /* Add letter spacing */
    padding-bottom: 8px; /* Space below text, above line */
    border-bottom: 1px solid var(--border-color); /* Separator line */
    text-align: center; /* Center align the heading */
}

/* Styles the unordered list holding the session items. */
#session-list {
    list-style: none; /* Remove default bullet points */
    padding: 0; /* Remove default padding */
    margin: 0; /* Remove default margin */
}

/* Styles individual session list items (<li>). */
#session-list li {
    padding: 10px 8px; /* Inner spacing */
    border-bottom: 1px solid var(--border-color); /* Separator line between items */
    cursor: pointer; /* Indicate interactivity */
    display: flex; /* Use flexbox for layout (text + notification dot) */
    justify-content: space-between; /* Push text and dot apart */
    align-items: center; /* Vertically align text and dot */
    word-wrap: break-word; /* Wrap long peer IDs */
    transition: background-color 0.15s ease; /* Smooth background transition on hover */
    border-radius: 3px; /* Slightly rounded corners */
    margin-bottom: 2px; /* Small space between items */
}
/* Remove border from the last item in the list. */
#session-list li:last-child {
    border-bottom: none;
}

/* Style for session list items on hover. */
#session-list li:hover {
    background-color: var(--bg-list-hover); /* Apply hover background color */
}

/* Style for the currently active/selected session list item. */
#session-list li.active-session {
    background-color: var(--bg-list-active); /* Apply active background color */
    font-weight: bold; /* Make text bold */
    color: var(--text-light-strong); /* Use stronger text color */
}

/* Animation definition for the notification dot pulse. */
@keyframes pulse {
  0% { box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.7); } /* Start with shadow */
  70% { box-shadow: 0 0 0 6px rgba(244, 67, 54, 0); } /* Expand shadow and fade */
  100% { box-shadow: 0 0 0 0 rgba(244, 67, 54, 0); } /* End with no shadow */
}

/* Styles the notification dot indicating unread messages. */
#session-list li .notification-dot {
    display: inline-block; /* Allow width/height */
    width: 10px; /* Dot size */
    height: 10px; /* Dot size */
    background-color: var(--accent-red); /* Red color */
    border-radius: 50%; /* Make it circular */
    margin-left: 8px; /* Space to the left of the dot */
    flex-shrink: 0; /* Prevent dot from shrinking */
    display: none; /* Hidden by default */
    animation: pulse 1.5s infinite; /* Apply the pulse animation */
    box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.7); /* Initial shadow state for animation */
}

/* Makes the notification dot visible when the list item has the 'has-unread' class. */
#session-list li.has-unread .notification-dot {
    display: inline-block; /* Show the dot */
}


/* Main Content Area */
/* Styles the main area to the right of the sidebar where different views are displayed. */
#main-content {
    flex-grow: 1; /* Allow this area to take up remaining horizontal space */
    padding: 15px 20px; /* Inner spacing */
    display: flex; /* Use flexbox */
    flex-direction: column; /* Stack content vertically */
    overflow: hidden; /* Prevent content overflow */
    background-color: var(--bg-main); /* Background color */
    position: relative; /* Needed for absolute positioning of overlay */
}

/* --- Overlay Styling --- */
/* Styles the overlay div shown behind modal panes. */
#overlay {
    display: none; /* Hidden by default */
    position: absolute; /* Position relative to #main-content */
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--bg-overlay); /* Use variable for semi-transparent background */
    z-index: 5; /* Position it above welcome, below info/request/settings/SAS */
}
/* --- End Overlay Styling --- */


/* Panes within Main Content - Controlled by JS */
/* Styles for the default welcome message shown when no chat is active. */
#welcome-message {
    text-align: center; /* Center text */
    margin: auto; /* Center the block horizontally and vertically */
    color: var(--text-secondary); /* Secondary text color */
    max-width: 550px; /* Limit width for readability */
    line-height: 1.7; /* Increase line height */
    /* display: none; */ /* Initially hidden/shown by JS */
    position: relative; /* Ensure it participates in stacking context */
    z-index: 1; /* Position it below the overlay */
}
/* Styles the main heading in the welcome message. */
#welcome-message h2 {
    color: var(--text-light-strong); /* Stronger text color */
    margin-bottom: 10px; /* Reduced space below heading */
    font-weight: 300; /* Lighter font weight */
    font-size: 1.8em; /* Larger font size */
}
/* --- Version Display Styling --- */
#app-version-display {
    font-size: 0.85em; /* Smaller font size */
    color: var(--accent-blue); /* Blue accent color */
    margin-top: -5px; /* Pull it closer to the header */
    margin-bottom: 25px; /* Space below version */
    /* Inherits text-align: center */
}
/* --- End Version Display Styling --- */
/* Styles paragraphs within the welcome message. */
#welcome-message p {
    margin-bottom: 15px; /* Space below paragraphs */
    font-size: 1.05em; /* Slightly larger font size */
}
/* Styles the highlighted user ID within the welcome message. */
#welcome-message strong {
    color: var(--accent-green); /* Use accent color */
    font-weight: 600; /* Semi-bold weight */
}

/* --- Welcome Logo Styling --- */
/* Styles the logo image added to the welcome message pane. */
#welcome-logo {
    display: block; /* Allows margin auto for centering */
    width: 80px;    /* Set desired width */
    height: auto;   /* Maintain aspect ratio */
    margin: 0 auto 25px auto; /* Center horizontally, add 25px margin below */
    opacity: 0.8; /* Slightly transparent */
}
/* --- End Welcome Logo Styling --- */


/* Styles the area displayed when an incoming chat request is received. */
#incoming-request-area {
    padding: 20px; /* Inner spacing */
    border: 1px dashed var(--border-color-info); /* Dashed border */
    /* margin: 30px auto; REMOVED - Use absolute positioning */
    background-color: var(--bg-info); /* Info background color */
    text-align: center; /* Center text */
    max-width: 450px; /* Limit width */
    width: 90%; /* Responsive width */
    border-radius: 5px; /* Rounded corners */
    color: var(--text-info); /* Info text color */
    /* display: none; */ /* Initially hidden/shown by JS */
    position: absolute; /* Position relative to #main-content */
    top: 50%;           /* Center vertically */
    left: 50%;          /* Center horizontally */
    transform: translate(-50%, -50%); /* Fine-tune centering */
    z-index: 10; /* Position it above the overlay */
}
/* Styles buttons within the incoming request area. */
#incoming-request-area button {
    margin: 15px 5px 0 5px; /* Top margin, side margins */
}

/* Styles the area used to display information like denials, timeouts, or errors. */
#info-area {
    display: none; /* Initially hidden/shown by JS */
    padding: 20px; /* Inner spacing */
    border: 1px solid var(--text-error); /* Use error text color for border */
    background-color: var(--bg-danger-info); /* Danger info background */
    color: var(--text-light); /* Standard light text */
    text-align: center; /* Center text */
    /* margin: 30px auto; REMOVED - Use absolute positioning */
    max-width: 450px; /* Limit width */
    width: 90%; /* Responsive width */
    border-radius: 5px; /* Rounded corners */
    position: absolute; /* Position relative to #main-content */
    top: 50%;           /* Center vertically */
    left: 50%;          /* Center horizontally */
    transform: translate(-50%, -50%); /* Fine-tune centering */
    z-index: 10; /* Position it above the overlay */
}
/* Styles paragraphs within the info area. */
#info-area p {
    margin-top: 0; /* Remove default top margin */
    margin-bottom: 15px; /* Space below paragraph */
    line-height: 1.6; /* Adjust line height */
}
/* Styles buttons within the info area. */
#info-area button {
    margin: 15px 5px 0 5px; /* Top margin, side margins */
}
/* Styles the retry button specifically (initially hidden). */
#retry-request-button {
    display: none; /* Hidden by default, shown by JS if retry is applicable */
}

/* Styles the area shown when the user has initiated a chat and is waiting for the peer to respond. */
#waiting-response-area {
    display: none; /* Initially hidden/shown by JS */
    padding: 20px; /* Inner spacing */
    border: 1px dashed var(--border-color-info); /* Dashed border */
    background-color: var(--bg-info); /* Info background color */
    color: var(--text-info); /* Info text color */
    text-align: center; /* Center text */
    /* margin: 30px auto; REMOVED - Use absolute positioning */
    max-width: 450px; /* Limit width */
    width: 90%; /* Responsive width */
    border-radius: 5px; /* Rounded corners */
    position: absolute; /* Position relative to #main-content */
    top: 50%;           /* Center vertically */
    left: 50%;          /* Center horizontally */
    transform: translate(-50%, -50%); /* Fine-tune centering */
    z-index: 10; /* Position it above the overlay */
}
/* Styles paragraphs within the waiting area. */
#waiting-response-area p {
    margin-top: 0; /* Remove default top margin */
    margin-bottom: 15px; /* Space below paragraph */
}
/* Styles the cancel button within the waiting area. */
#waiting-response-area button {
    margin-top: 15px; /* Space above the button */
}

/* --- SAS Verification Area Styling --- */
#sas-verification-area {
    display: none; /* Hidden by default */
    padding: 25px 30px; /* Inner spacing */
    border: 1px solid var(--border-color-info); /* Use info border color */
    background-color: var(--bg-info); /* Use info background color */
    color: var(--text-light); /* Standard light text */
    text-align: center; /* Center text */
    max-width: 500px; /* Limit width */
    width: 90%; /* Responsive width */
    border-radius: 5px; /* Rounded corners */
    position: absolute; /* Position relative to #main-content */
    top: 50%;           /* Center vertically */
    left: 50%;          /* Center horizontally */
    transform: translate(-50%, -50%); /* Fine-tune centering */
    z-index: 10; /* Position it above the overlay */
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); /* Add a subtle shadow */
}

#sas-verification-area h3 {
    margin-top: 0;
    margin-bottom: 15px;
    font-weight: 300;
    font-size: 1.4em;
    color: var(--text-light-strong);
}

#sas-verification-area p {
    margin-bottom: 15px;
    line-height: 1.6;
    color: var(--text-secondary);
}

#sas-display {
    display: block; /* Make it block level */
    font-family: 'Courier New', Courier, monospace; /* Monospace font */
    font-size: 2.2em; /* Larger font size */
    font-weight: bold;
    letter-spacing: 3px; /* Add spacing between characters */
    color: var(--text-sas-display); /* Specific text color */
    background-color: var(--bg-sas-display); /* Darker background */
    padding: 15px 20px; /* Padding */
    border: 1px solid var(--border-color-sas-display); /* Border */
    border-radius: 4px; /* Rounded corners */
    margin: 20px auto; /* Vertical and horizontal centering */
    max-width: 200px; /* Limit width */
    user-select: text; /* Allow user to select/copy the code */
}

/* Container for SAS buttons */
#sas-verification-area .sas-buttons {
    margin-top: 15px; /* Space above the buttons */
}

/* Individual SAS buttons */
#sas-verification-area button {
    margin: 5px 8px; /* Vertical and horizontal margins */
    min-width: 120px; /* Ensure buttons have decent width */
}

/* Style the Confirm button using success colors */
#sas-confirm-button {
    background-color: var(--bg-button-success);
    border-color: var(--border-color-success);
}
#sas-confirm-button:hover {
    background-color: var(--bg-button-success-hover);
}

/* Style the Deny button using danger colors */
#sas-deny-button {
    background-color: var(--bg-button-danger);
    border-color: var(--border-color-danger);
}
#sas-deny-button:hover {
    background-color: var(--bg-button-danger-hover);
}

/* NEW: Style the Cancel Pending button using danger colors */
#sas-cancel-pending-button {
    background-color: var(--bg-button-danger);
    border-color: var(--border-color-danger);
    /* display: none; */ /* Initially hidden via inline style in HTML */
}
#sas-cancel-pending-button:hover {
    background-color: var(--bg-button-danger-hover);
}
/* --- END SAS Verification Area Styling --- */


/* Active Chat Area */
/* Container for the currently active chat session view. */
#active-chat-area {
    flex-grow: 1; /* Allow this area to fill the main content space */
    display: none; /* Hidden by default, shown by JS when a chat is active */
    flex-direction: column; /* Stack header, messages, input vertically */
    overflow: hidden; /* Prevent content overflow */
    position: relative; /* Ensure it participates in stacking context */
    z-index: 1; /* Position it normally (no overlay needed) */
}

/* Styles the header within the active chat area (shows peer ID, disconnect button). */
#chat-header {
    padding-bottom: 12px; /* Space below the header text/button */
    border-bottom: 1px solid var(--border-color); /* Separator line */
    margin-bottom: 12px; /* Space below the line, above message area */
    flex-shrink: 0; /* Prevent header from shrinking */
    font-size: 1.1em; /* Slightly larger font */
    color: var(--text-secondary); /* Secondary text color for the label */
    display: flex; /* Use flexbox for layout */
    justify-content: space-between; /* Push peer ID and button apart */
    align-items: center; /* Vertically align items */
}
/* Styles the peer's ID within the chat header. */
#chat-header strong {
    color: var(--text-light-strong); /* Stronger text color for the ID */
}
/* Styles the disconnect button within the chat header. */
#chat-header #disconnect-button {
    margin-top: 0; /* Override default button margin */
    padding: 4px 10px; /* Smaller padding */
    font-size: 0.85em; /* Smaller font size */
    background-color: var(--bg-button-danger); /* Danger background color */
    border: 1px solid var(--border-color-danger); /* Danger border color */
    color: var(--text-light); /* Light text color */
    cursor: pointer; /* Indicate interactivity */
    transition: background-color 0.15s ease, border-color 0.15s ease; /* Smooth transitions */
}
/* Styles the disconnect button on hover. */
#chat-header #disconnect-button:hover {
    background-color: var(--bg-button-danger-hover); /* Darker danger background */
    border-color: var(--accent-red); /* Use accent red for border */
}

/* Styles the main area where chat messages are displayed. */
#message-area {
    flex-grow: 1; /* Allow message area to fill vertical space */
    overflow-y: scroll; /* Enable vertical scrolling for messages */
    border: 1px solid var(--border-color); /* Border around the area */
    margin-bottom: 10px; /* Space below messages, before typing indicator/input */
    padding: 10px; /* Inner spacing */
    background-color: var(--bg-message-area); /* Specific background for messages */
    /* Font family and size will be controlled by JS */
}

/* IRC Style Message Display */
/* Styles individual message containers (divs) within the message area. */
#message-area div {
    margin-bottom: 4px; /* Space between messages */
    padding: 2px 5px; /* Small padding around message content */
    word-wrap: break-word; /* Wrap long words/messages */
    line-height: 1.5; /* Ensure consistent line height */
}

/* Styles system messages (e.g., connection status, errors within chat). */
.message-system {
    color: var(--text-sender-system); /* System message text color */
    font-style: italic; /* Italicize system messages */
    text-align: left; /* Align left */
    background-color: var(--bg-message-system); /* Subtle background */
    border-radius: 3px; /* Rounded corners */
}

/* Styles the timestamp prefix for each message. */
.message-timestamp {
    color: var(--text-secondary); /* Secondary text color */
    font-size: 0.8em; /* Smaller font size */
    margin-right: 8px; /* Space between timestamp and sender/action */
    display: inline-block; /* Keep on the same line */
}

/* Styles the sender prefix (e.g., <Alice>) for each message. */
.message-sender {
    font-weight: bold; /* Make sender bold */
    margin-right: 8px; /* Space between sender and message text */
    display: inline-block; /* Keep on the same line */
}
/* Applies specific color for the peer's sender name. */
.message-sender.sender-peer {
     color: var(--text-sender-peer);
}
/* Applies specific color for the user's own sender name. */
.message-sender.sender-own {
     color: var(--text-sender-own);
}
/* Applies specific color for the system message prefix. */
.message-sender.sender-system {
     color: var(--text-sender-system);
}

/* Styles the actual text content of a message. */
.message-text {
    display: inline; /* Keep on the same line as sender */
    color: var(--text-light); /* Default light text color */
}

/* --- Link Styling within Messages --- */
/* Styles anchor tags specifically within the message text span */
.message-text a {
    color: var(--text-link); /* Use the defined link color */
    text-decoration: underline; /* Add underline for clarity */
    word-break: break-all; /* Allow long URLs to break anywhere */
}
.message-text a:hover {
    text-decoration: none; /* Optional: Remove underline on hover */
}
/* --- End Link Styling --- */

/* --- /me Action Message Styling --- */
/* Styles the container for a /me action message. */
.message-me-action {
    color: var(--text-action); /* Use a distinct color for action text */
    font-style: italic; /* Italicize action messages */
    text-align: left; /* Align left */
    /* Optional: Add a subtle background or border if desired */
    /* background-color: rgba(255, 213, 79, 0.05); */
}
/* Styles the inner span containing the action text itself. */
.message-me-action .action-text {
    display: inline; /* Keep on same line as timestamp */
}
/* --- End /me Action Styling --- */

/* --- Command Error Message Styling --- */
/* Styles system messages that are specifically command errors. */
.message-command-error {
    color: var(--text-error); /* Use the error text color */
    font-weight: bold; /* Make error text bold */
    /* Inherits italic style from .message-system */
}
/* Styles the inner span containing the error text itself. */
.message-command-error .error-text {
    display: inline; /* Keep on same line as timestamp */
}
/* --- End Command Error Styling --- */


/* --- File Transfer Message Styling --- */
/* Styles the container for a file transfer status message. */
/* This structure is added dynamically by UIController.js */
.message-file-transfer {
    background-color: var(--bg-message-file); /* Use specific background */
    border: 1px solid var(--border-color-file); /* Specific border */
    border-radius: 4px; /* Rounded corners */
    padding: 8px 12px; /* Inner padding */
    margin-bottom: 8px; /* Space below */
    display: flex; /* Use flexbox for layout */
    flex-direction: column; /* Stack info, status, progress, actions vertically */
    gap: 6px; /* Space between stacked items */
}

/* Styles the container for filename and size. */
.message-file-transfer .file-info {
    display: flex; /* Arrange name and size */
    justify-content: space-between; /* Push name and size apart */
    align-items: baseline; /* Align text baselines */
    font-size: 0.95em;
    color: var(--text-file-info);
}

/* Styles the filename within the file info. */
.message-file-transfer .file-name {
    font-weight: bold; /* Make filename bold */
    word-break: break-all; /* Break long filenames */
    margin-right: 10px; /* Space between name and size */
}

/* Styles the file size text. */
.message-file-transfer .file-size {
    font-size: 0.9em; /* Slightly smaller */
    color: var(--text-secondary); /* Use secondary color */
    white-space: nowrap; /* Prevent size from wrapping */
}

/* Styles the status text (e.g., "Waiting...", "Uploading...", "Complete"). */
.message-file-transfer .file-status {
    font-size: 0.9em;
    font-style: italic;
    color: var(--text-secondary);
}

/* Styles the progress bar element. */
.message-file-transfer .file-progress {
    width: 100%; /* Full width */
    height: 8px; /* Adjust height */
    appearance: none; /* Remove default browser styling */
    border: none; /* Remove default border */
    border-radius: 4px; /* Rounded corners */
    overflow: hidden; /* Ensure value stays within bounds */
    background-color: var(--bg-input); /* Background of the track */
}
/* Styles the progress bar value (filled part) for WebKit browsers (Chrome, Safari, Edge). */
.message-file-transfer .file-progress::-webkit-progress-bar {
    background-color: var(--bg-input);
    border-radius: 4px;
}
.message-file-transfer .file-progress::-webkit-progress-value {
    background-color: var(--accent-progress); /* Use accent color for progress */
    border-radius: 4px;
    transition: width 0.1s linear; /* Smooth progress updates */
}
/* Styles the progress bar value (filled part) for Firefox. */
.message-file-transfer .file-progress::-moz-progress-bar {
    background-color: var(--accent-progress);
    border-radius: 4px;
    transition: width 0.1s linear;
}

/* Styles the container for action buttons/links. */
.message-file-transfer .file-actions {
    margin-top: 4px; /* Space above the actions */
    display: flex; /* Arrange buttons horizontally */
    gap: 8px; /* Space between buttons */
    align-items: center; /* Vertically align buttons/links */
}

/* Base styles for buttons within file transfer messages. */
.message-file-transfer .file-actions button,
.message-file-transfer .file-actions a {
    padding: 3px 8px; /* Smaller padding */
    font-size: 0.85em; /* Smaller font size */
    border-radius: 3px;
    cursor: pointer;
    text-decoration: none; /* Remove underline from link */
    display: inline-block; /* Ensure link behaves like button */
    text-align: center;
    transition: background-color 0.15s ease, border-color 0.15s ease;
}

/* Specific styles for Accept button. */
.message-file-transfer .file-accept-btn {
    background-color: var(--bg-button-success);
    border: 1px solid var(--border-color-success);
    color: var(--text-light-strong);
}
.message-file-transfer .file-accept-btn:hover {
    background-color: var(--bg-button-success-hover);
}

/* Specific styles for Reject and Cancel buttons. */
.message-file-transfer .file-reject-btn,
.message-file-transfer .file-cancel-btn {
    background-color: var(--bg-button-danger);
    border: 1px solid var(--border-color-danger);
    color: var(--text-light);
}
.message-file-transfer .file-reject-btn:hover,
.message-file-transfer .file-cancel-btn:hover {
    background-color: var(--bg-button-danger-hover);
}

/* Styles for the Download link. */
.message-file-transfer .file-download-link {
    color: var(--text-link);
    background-color: var(--bg-button);
    border: 1px solid var(--border-color);
}
.message-file-transfer .file-download-link:hover {
    background-color: var(--bg-button-hover);
    color: #ffffff; /* Brighter link color on hover */
}
/* --- End File Transfer Message Styling --- */


/* --- Typing Indicator Styling --- */
/* Styles the container area reserved for the typing indicator below the message area. */
#typing-indicator-area {
    height: 20px; /* Reserve a fixed height for the indicator */
    flex-shrink: 0; /* Prevent this area from shrinking */
    padding: 0 5px 5px 5px; /* Padding below the text, inside the area */
    overflow: hidden; /* Hide text if it somehow overflows the reserved height */
}
/* Styles the text element that shows "Peer is typing...". */
#typing-indicator-text {
    font-size: 0.9em; /* Slightly smaller font */
    font-style: italic; /* Italicize the text */
    color: var(--text-secondary); /* Use secondary text color */
    display: none; /* Hidden by default, shown by JS */
}
/* ----------------------------------- */


/* Styles the container for the message input field and send button. */
#message-input-area {
    display: flex; /* Use flexbox for side-by-side layout */
    align-items: center; /* Vertically align items (input, buttons) */
    flex-shrink: 0; /* Prevent this area from shrinking */
    margin-top: 5px; /* Space above the input area (below typing indicator) */
}

/* Styles the text input field for typing messages. */
#message-input {
    flex-grow: 1; /* Allow input field to take up available space */
    margin-right: 8px; /* Space between input field and send button */
}

/* --- Attach Button Styling --- */
/* Styles the attach button specifically. */
#attach-button {
    background: none; /* Transparent background */
    border: 1px solid transparent; /* No border by default */
    color: var(--text-secondary); /* Use secondary color for icon */
    padding: 6px 8px; /* Adjust padding to align height with input/send */
    margin-right: 6px; /* Space between attach and input */
    font-size: 1.3em; /* Make icon larger */
    cursor: pointer;
    border-radius: 3px;
    line-height: 1; /* Match line height */
    transition: background-color 0.15s ease, border-color 0.15s ease, color 0.15s ease;
}
/* Styles the attach button on hover. */
#attach-button:hover {
    background-color: var(--bg-button-hover);
    border-color: var(--border-color-input);
    color: var(--text-light);
}
/* Styles the attach button when actively clicked. */
#attach-button:active {
    background-color: var(--bg-button-active);
}
/* Styles the attach button when disabled. */
#attach-button:disabled {
    background: none;
    border-color: transparent;
    color: var(--text-button-disabled);
    cursor: not-allowed;
    opacity: 0.5;
}
/* --- End Attach Button Styling --- */


/* Styles the send button specifically within the input area. */
#message-input-area #send-button { /* Use more specific selector */
    padding: 8px 15px; /* Standard button padding */
    flex-shrink: 0; /* Prevent send button from shrinking */
}

/* --- Settings Pane Styling --- */
/* Styles the settings pane container. */
#settings-pane {
    display: none; /* Hidden by default, shown by JS */
    padding: 20px 25px; /* Inner spacing */
    border: 1px solid var(--border-color-settings); /* Border */
    background-color: var(--bg-settings); /* Specific background */
    color: var(--text-light); /* Standard light text */
    max-width: 500px; /* Limit width */
    width: 90%; /* Responsive width */
    border-radius: 5px; /* Rounded corners */
    position: absolute; /* Position relative to #main-content */
    top: 50%;           /* Center vertically */
    left: 50%;          /* Center horizontally */
    transform: translate(-50%, -50%); /* Fine-tune centering */
    z-index: 10; /* Position it above the overlay */
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); /* Add a subtle shadow */
}

/* Styles the main heading within the settings pane. */
#settings-pane h2 {
    margin-top: 0;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--border-color);
    font-weight: 300; /* Lighter weight */
    font-size: 1.5em;
    color: var(--text-light-strong);
    text-align: center;
}

/* Styles sections within the settings pane. */
#settings-pane .settings-section {
    margin-bottom: 20px;
}

/* Styles sub-headings within settings sections. */
#settings-pane .settings-section h3 {
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 1.1em;
    color: var(--text-secondary);
    border-bottom: 1px dashed var(--border-color);
    padding-bottom: 5px;
}

/* Styles individual setting items (label + input/select). */
#settings-pane .setting-item {
    margin-bottom: 12px;
    display: flex; /* Use flexbox for alignment */
    align-items: center; /* Vertically align label and control */
    gap: 10px; /* Space between label and control */
}

/* Styles labels within setting items. */
#settings-pane .setting-item label {
    flex-basis: 120px; /* Fixed width for labels */
    flex-shrink: 0; /* Prevent label from shrinking */
    text-align: right; /* Align label text to the right */
    color: var(--text-secondary);
    font-size: 0.95em;
}

/* Styles select dropdowns within setting items. */
#settings-pane .setting-item select {
    flex-grow: 1; /* Allow select to fill remaining space */
    /* Inherit general input styles */
}

/* Styles number inputs within setting items. */
#settings-pane .setting-item input[type="number"] {
    flex-grow: 1; /* Allow input to fill remaining space */
    max-width: 80px; /* Limit width of number input */
    /* Inherit general input styles */
}

/* Styles the close button at the bottom of the settings pane. */
#settings-pane #close-settings-button {
    display: block; /* Make it a block element */
    margin: 20px auto 0 auto; /* Center the button horizontally, add top margin */
    min-width: 100px; /* Minimum width */
}
/* --- End Settings Pane Styling --- */


/* General Input/Button Styling */
/* Base styles for all text input fields. */
input[type="text"],
input[type="number"], /* Add number input */
select { /* Add select element */
    background-color: var(--bg-input); /* Input background color */
    color: var(--text-light); /* Text color */
    border: 1px solid var(--border-color-input); /* Input border color */
    padding: 9px 10px; /* Inner padding */
    border-radius: 3px; /* Rounded corners */
    font-size: inherit; /* Use the font size of the parent element */
    transition: border-color 0.15s ease, box-shadow 0.15s ease; /* Smooth transitions for focus */
    box-sizing: border-box; /* Ensure padding/border included in width */
}
/* Styles for text/number/select fields when they have focus. */
input[type="text"]:focus,
input[type="number"]:focus,
select:focus {
    outline: none; /* Remove default browser outline */
    border-color: var(--accent-blue); /* Use blue accent color for border */
    box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.3); /* Add a subtle blue glow */
}
/* Styles for disabled text/number/select fields. */
input[type="text"]:disabled,
input[type="number"]:disabled,
select:disabled {
    background-color: #444; /* Darker background */
    cursor: not-allowed; /* Indicate non-interactivity */
    opacity: 0.6; /* Reduce opacity */
}

/* Base styles for all buttons (excluding icon buttons and disconnect). */
/* MODIFIED: Added #attach-button, #emoji-picker-button, #sas-confirm-button, #sas-deny-button, #sas-cancel-pending-button to the exclusion list */
button:not(#mute-button):not(#settings-button):not(#disconnect-button):not(#attach-button):not(#emoji-picker-button):not(#sas-confirm-button):not(#sas-deny-button):not(#sas-cancel-pending-button) {
    padding: 8px 15px; /* Default padding */
    cursor: pointer; /* Indicate interactivity */
    border: 1px solid var(--border-color); /* Default border */
    border-radius: 3px; /* Rounded corners */
    background-color: var(--bg-button); /* Default background */
    color: var(--text-light-strong); /* Default text color */
    font-size: 0.95em; /* Slightly smaller font size */
    transition: background-color 0.15s ease, border-color 0.15s ease; /* Smooth transitions */
}
/* Styles for buttons on hover (excluding icon buttons and disconnect). */
/* MODIFIED: Added #attach-button, #emoji-picker-button, #sas-confirm-button, #sas-deny-button, #sas-cancel-pending-button to the exclusion list */
button:not(#mute-button):not(#settings-button):not(#disconnect-button):not(#attach-button):not(#emoji-picker-button):not(#sas-confirm-button):not(#sas-deny-button):not(#sas-cancel-pending-button):hover {
    background-color: var(--bg-button-hover); /* Hover background color */
    border-color: #666; /* Slightly lighter border */
}
/* Styles for buttons when actively being clicked (excluding icon buttons and disconnect). */
/* MODIFIED: Added #attach-button, #emoji-picker-button, #sas-confirm-button, #sas-deny-button, #sas-cancel-pending-button to the exclusion list */
button:not(#mute-button):not(#settings-button):not(#disconnect-button):not(#attach-button):not(#emoji-picker-button):not(#sas-confirm-button):not(#sas-deny-button):not(#sas-cancel-pending-button):active {
     background-color: var(--bg-button-active); /* Active background color */
}
/* Styles for disabled buttons (excluding icon buttons and disconnect). */
/* MODIFIED: Added #attach-button, #emoji-picker-button, #sas-confirm-button, #sas-deny-button, #sas-cancel-pending-button to the exclusion list */
button:not(#mute-button):not(#settings-button):not(#disconnect-button):not(#attach-button):not(#emoji-picker-button):not(#sas-confirm-button):not(#sas-deny-button):not(#sas-cancel-pending-button):disabled {
    background-color: var(--bg-button-disabled); /* Disabled background */
    border-color: var(--border-color-input); /* Use input border color */
    color: var(--text-button-disabled); /* Disabled text color */
    cursor: not-allowed; /* Indicate non-interactivity */
    opacity: 0.6; /* Reduce opacity */
}

/* --- Emoji Picker Button Styling --- */
#emoji-picker-button {
    background: none;
    border: 1px solid transparent;
    color: var(--text-secondary);
    padding: 6px 8px; /* Match attach button */
    margin-right: 6px; /* Space between emoji and input */
    font-size: 1.3em; /* Match attach button */
    cursor: pointer;
    border-radius: 3px;
    line-height: 1;
    transition: background-color 0.15s ease, border-color 0.15s ease, color 0.15s ease;
}
#emoji-picker-button:hover {
    background-color: var(--bg-button-hover);
    border-color: var(--border-color-input);
    color: var(--text-light);
}
#emoji-picker-button:active {
    background-color: var(--bg-button-active);
}
#emoji-picker-button:disabled {
    background: none;
    border-color: transparent;
    color: var(--text-button-disabled);
    cursor: not-allowed;
    opacity: 0.5;
}
/* --- END Emoji Picker Button Styling --- */

/* --- Emoji Picker Panel Styling --- */
.emoji-picker {
    display: none; /* Hidden by default */
    position: absolute; /* Position relative to nearest positioned ancestor (likely #main-content or body) */
    background-color: var(--bg-emoji-panel);
    border: 1px solid var(--border-color-emoji-panel);
    border-radius: 5px;
    padding: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    z-index: 100; /* Ensure it's above most other elements */
    max-height: 200px; /* Limit height and allow scrolling */
    overflow-y: auto;
    width: 280px; /* Adjust width as needed */
    /* Positioning will be set by JS */
}

.emoji-picker span {
    display: inline-block;
    padding: 4px;
    font-size: 1.4em; /* Adjust emoji size */
    cursor: pointer;
    border-radius: 3px;
    transition: background-color 0.1s ease;
}

.emoji-picker span:hover {
    background-color: var(--bg-emoji-hover);
}
/* --- END Emoji Picker Panel Styling --- */


/* Dark Scrollbar Styling (WebKit/Blink - Chrome, Safari, Edge, Opera) */
/* Styles the scrollbar track and thumb for a dark theme. */
::-webkit-scrollbar {
  width: 10px; /* Width of vertical scrollbar */
  height: 10px; /* Height of horizontal scrollbar */
}
/* Styles the background of the scrollbar track. */
::-webkit-scrollbar-track {
  background: var(--bg-sidebar); /* Use sidebar background for track */
}
/* Styles the draggable scrollbar thumb. */
::-webkit-scrollbar-thumb {
  background-color: #555; /* Dark grey thumb color */
  border-radius: 5px; /* Rounded thumb */
  border: 2px solid var(--bg-sidebar); /* Create padding around thumb */
}
/* Styles the thumb on hover. */
::-webkit-scrollbar-thumb:hover {
  background-color: #777; /* Lighter grey on hover */
}
/* Styles the corner where vertical and horizontal scrollbars meet. */
::-webkit-scrollbar-corner {
  background: var(--bg-sidebar); /* Match track background */
}

/* Dark Scrollbar Styling (Firefox) */
/* Styles the scrollbar for Firefox using standard properties. */
* {
  scrollbar-width: thin; /* Use thin scrollbars */
  scrollbar-color: #555 var(--bg-sidebar); /* thumb color, track color */
}